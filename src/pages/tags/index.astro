---
import Base from "../../layouts/Base.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { getAllTags } from "../../utils/posts";

const tags = await getAllTags();
const sortedTags = [...tags.entries()].sort((a, b) => b[1] - a[1]);
---

<Base title="Tags | justinmeimar â€” Justin Meimar" description="Browse posts by topic on justinmeimar.com">
  <div class="max-w-2xl mx-auto px-6 py-12 md:py-20">
    <Header activeSection="writing" />

    <section class="animate-fade-up stagger-1">
      <h1 class="font-serif text-3xl md:text-4xl font-normal tracking-tight mb-4">
        Tags
      </h1>
      <p class="font-serif text-lg text-[var(--text-muted)] leading-relaxed mb-12">
        Browse posts by topic.
      </p>
    </section>

    <!-- Divider -->
    <div class="mb-12 h-px bg-[var(--border)] animate-fade-in stagger-2"></div>

    <section class="animate-fade-up stagger-2">
      {
        sortedTags.length > 0 ? (
          <div class="flex flex-wrap gap-3">
            {sortedTags.map(([tag, count]) => (
              <a
                href={`/tags/${tag}`}
                class="font-mono text-sm px-3 py-1.5 rounded bg-[var(--bg-paper)] text-[var(--text-muted)] hover:text-[var(--text)] hover:bg-[var(--border)] transition-colors"
              >
                #{tag}
                <span class="text-[var(--text-faint)] ml-1">({count})</span>
              </a>
            ))}
          </div>
        ) : (
          <p class="font-serif text-sm text-[var(--text-muted)] italic">
            No tags yet.
          </p>
        )
      }
    </section>

    <div class="mt-20">
      <Footer />
    </div>
  </div>
</Base>
